#### PPTä¸­ä»£ç 

trainä¸­ mask=Noneï¼Œæš‚ä¸”ä¸çœ‹mask

pos_embedding_type="learnable" ???

PPTäº‹å…ˆæå–å¤šå¼ ç‰¹å¾å›¾

----

åœ¨yamlä¸­å®šä¹‰äº†å›¾ç‰‡çš„å¤§å°

```
  IMAGE_SIZE:
  - 192
  - 256
```

ä¸çŸ¥é“æ€ä¹ˆè½¬çš„ï¼Œåæ­£å›¾ç‰‡åœ¨ `lib/dataset/JointsDataset.py` ä¸­éƒ½å˜æˆäº†192x256

```
img's size =  torch.Size([16, 3, 256, 192])
the shape of x =  torch.Size([16, 256, 64, 48])
```

è¿™ç©æ„ä¹‹åæ€ä¹ˆè¿˜åŸå•Šï¼ŸğŸ˜¨ ä¸çŸ¥é“æ¢äº†æ–¹æ³•ä¼šä¸ä¼šå› ä¸ºè¿™ä¸ªå…³èŠ‚ä½ç½®æœ‰å½±å“ã€ã€ã€

----

##### PPTå›¾ç‰‡åœ¨è¾“å…¥transformerå‰çš„å¤„ç†ï¼š

- ç»è¿‡ä¸¤å±‚å·ç§¯å’Œä¸€ä¸ªlayer? ç»´åº¦[n, 3, 256, 192]->[n, 256, 64, 48]
- rearrange ç»´åº¦[n, 256, 64, 48]->[n, 256, 3072]
- embedding ->[n, 256, 192]
- åŠ ä¸Špos_embeddingååŠ ä¸Šå…³èŠ‚token ->[n,273, 192]
- xè¾“å…¥transformer

##### CF-ViTå›¾ç‰‡åœ¨è¾“å…¥transformerå‰çš„å¤„ç†ï¼š

- åœ¨ deit/engine_deit.py ä¸­å°†åŸå›¾ç‰‡ä¸Šé‡‡æ ·ï¼Œé•¿å®½ä¸ºåŸå…ˆçš„1/2ï¼Œä¸åŸå›¾ç‰‡å½¢æˆåˆ—è¡¨è¾“å…¥ï¼Œè¾“å…¥æ ¼å¼ä¸º[(n, 3, 112, 112), (n, 3, 224, 224)]
- åœ¨ deit/models_deit.py ä¸­å°†ä¸Šé‡‡æ ·æ•°æ®embedding ->(n, 49, 768)
- åŠ å…¥åˆ†ç±»tokenç„¶ååŠ ä¸Špos_embedding ->(n, 50, 768)
- xè¾“å…¥transformer

| transformerçš„è¿‡ç¨‹ | PPT                                                          | CV-ViT                                                       |
| ----------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| attention         | å±‚æ­£åˆ™ï¼Œå¤šå¤´å¾—åˆ°qkvï¼Œqkç‚¹ä¹˜ç¼©æ”¾å¾—åˆ°attnï¼Œattnå’Œvä¹˜årearrangeã€ç„¶ålinear+dropoutå¾—åˆ°è¾“å‡ºxï¼›tok_attnæ˜¯17ä¸ªå…³èŠ‚å¯¹å…¶ä»–xçš„æ³¨æ„åŠ› | å±‚æ­£åˆ™ï¼Œå¤šå¤´å¾—åˆ°qkvï¼Œqkç‚¹ä¹˜ç¼©æ”¾å¾—åˆ°attnï¼Œdropout(attn)ï¼Œattnå’Œvä¹˜årearrangeã€ç„¶ålinear + dropoutå¾—åˆ°è¾“å‡ºxï¼›attnä¸å˜ï¼›xåˆå äº†å‡ å±‚dropPathå’Œmlp |
|                   |                                                              |                                                              |
|                   |                                                              |                                                              |

